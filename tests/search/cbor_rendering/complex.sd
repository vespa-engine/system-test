schema complex {
    document complex {
        field title type string {
            indexing: summary | index
        }
        field count type int {
            indexing: summary | attribute
        }
        field price type double {
            indexing: summary | attribute
        }
        field tags type array<string> {
            indexing: summary | attribute
        }
        field metadata type map<string, string> {
            indexing: summary
        }
        field attributes type weightedset<string> {
            indexing: summary | attribute
        }
        field info type struct {
            field category type string {}
            field rating type double {}
        } {
            indexing: summary
        }
    }

    fieldset default {
        fields: title
    }

    rank-profile default {
        first-phase {
            expression: attribute(count) * attribute(price)
        }
        summary-features {
            attribute(count)
            attribute(price)
            query(myvalue)
        }
        match-features {
            attribute(count)
            firstPhaseRank
        }
    }
}
